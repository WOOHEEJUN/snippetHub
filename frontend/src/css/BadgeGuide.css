/* =====================
   Layout
   ===================== */
.badge-guide-page{padding:40px 0;background:#1a1a1a;min-height:100vh;}
.container{width:min(1100px,calc(100% - 40px));margin:0 auto;}
.page-header{text-align:center;margin-bottom:40px;color:#e0e0e0;}
.page-header h1{font-size:2.4rem;margin-bottom:10px;font-weight:800;}
.page-header p{font-size:1.05rem;opacity:.9}

/* =====================
   Stats
   ===================== */
.stats-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:32px;}
.stats-card{background:#191919;border:1px solid #262626;border-radius:14px;padding:22px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.35);transition:.25s;}
.stats-card:hover{transform:translateY(-4px)}
.stats-number{font-size:2.1rem;font-weight:800;color:#8ab0d1;margin-bottom:6px;}
.stats-label{color:#b7bbc1;font-weight:600}

/* =====================
   Category filter
   ===================== */
.filter-section{background:#191919;border:1px solid #262626;border-radius:14px;padding:22px;margin-bottom:26px;box-shadow:0 8px 24px rgba(0,0,0,.35)}
.filter-section h3{color:#e0e0e0;margin-bottom:16px;font-weight:700}
.category-filters{display:flex;flex-wrap:wrap;gap:10px}
.category-filter{
  background:#232323;border:2px solid #343434;color:#e0e0e0;
  padding:9px 18px;border-radius:999px;cursor:pointer;font-weight:700;letter-spacing:.2px;
  transition:.18s;
}
.category-filter:hover{background:#2c2c2c;border-color:#4a4a4a}
.category-filter.active{background:#8ab0d1;border-color:#8ab0d1;color:#0f1a22}

/* =====================
   Grid / Card
   ===================== */
.badges-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:22px}
.badge-card{
  --accent:#8ab0d1;
  background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)) #161616;
  border:1px solid rgba(255,255,255,.06);
  border-radius:16px;padding:22px;position:relative;overflow:hidden;
  box-shadow:0 12px 26px rgba(0,0,0,.45);backdrop-filter:blur(6px);
  transition:transform .22s ease, box-shadow .22s ease;
}
.badge-card:hover{transform:translateY(-4px) scale(1.01);box-shadow:0 16px 32px rgba(0,0,0,.55)}
.badge-card.not-owned{filter:saturate(.78) contrast(.98) brightness(.96)}

/* =====================
   Badge coin + center PNG
   ===================== */
.badge-image{position:relative;text-align:center;margin-bottom:16px}
.badge-icon-container{
  --coin-size:88px;
  --ring-width:6px;         /* 도넛 링 두께(애니메이션에 사용) */
  --spin-speed:16s;         /* 기본 회전 속도 */
  width:var(--coin-size);height:var(--coin-size);margin:0 auto;border-radius:50%;
  position:relative;isolation:isolate;overflow:visible;
  background:
    radial-gradient(120px 120px at 35% 30%, rgba(255,255,255,.06), transparent 60%) padding-box,
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(0,0,0,.08)) padding-box;
  border:3px solid #222;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.08),
    inset 0 -1px 0 rgba(0,0,0,.28),
    0 6px 18px rgba(0,0,0,.35);
}
.badge-core-img{
  position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
  width:66%;height:66%;object-fit:contain;pointer-events:none;user-select:none;z-index:2;opacity:.98;
}

/* ===== Animated aura ring (pseudo elements) =====
   ::before = 외곽 무지개/단색 링(회전)
   ::after  = 은은한 글로우(맥동)
*/
.badge-icon-container::before,
.badge-icon-container::after{
  content:"";position:absolute;inset:-10px;border-radius:50%;z-index:1;pointer-events:none;
}

.badge-icon-container::before{
  /* 도넛형 마스크(테두리만 보이게) */
  -webkit-mask:
    radial-gradient(circle,
      transparent calc(50% - var(--ring-width)),
      #000 calc(50% - var(--ring-width) + 1px),
      #000 calc(50% + var(--ring-width) - 1px),
      transparent calc(50% + var(--ring-width))
    );
          mask:
    radial-gradient(circle,
      transparent calc(50% - var(--ring-width)),
      #000 calc(50% - var(--ring-width) + 1px),
      #000 calc(50% + var(--ring-width) - 1px),
      transparent calc(50% + var(--ring-width))
    );
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.5));
  animation: spin var(--spin-speed) linear infinite;
  opacity:.9;
}
.badge-icon-container::after{
  background: radial-gradient(60% 60% at 50% 50%, var(--accent) 0%, transparent 70%);
  filter: blur(6px); opacity:.45; animation: pulse 3.5s ease-in-out infinite;
}

/* ===== Rarity styles (테두리 색/애니메이션 강화) ===== */
[data-rarity="common"] .badge-icon-container{--accent:#666;--spin-speed:20s;}
[data-rarity="common"] .badge-icon-container::before{
  background: conic-gradient(#3d3d3d, #353535, #3d3d3d);
  opacity:.6;
}
[data-rarity="common"] .badge-icon-container::after{opacity:.2}

[data-rarity="uncommon"] .badge-icon-container{--accent:#79a9c9;--spin-speed:18s;}
[data-rarity="uncommon"] .badge-icon-container::before{
  background: conic-gradient(
    color-mix(in oklab, var(--accent) 30%, #1a1a1a),
    color-mix(in oklab, var(--accent) 10%, #1a1a1a),
    color-mix(in oklab, var(--accent) 30%, #1a1a1a)
  );
}

[data-rarity="rare"] .badge-icon-container{--accent:#8ab0d1;--spin-speed:16s;}
[data-rarity="rare"] .badge-icon-container::before{
  background: conic-gradient(
    color-mix(in oklab, var(--accent) 45%, #111),
    color-mix(in oklab, var(--accent) 20%, #111),
    color-mix(in oklab, var(--accent) 45%, #111)
  );
}
[data-rarity="rare"] .badge-icon-container::after{opacity:.55}

[data-rarity="epic"] .badge-icon-container{--accent:#9b87f5;--spin-speed:14s;}
[data-rarity="epic"] .badge-icon-container::before{
  background: conic-gradient(
    #9b87f5, #67e8f9, #86efac, #9b87f5
  );
  box-shadow: 0 0 14px rgba(155,135,245,.35);
}
[data-rarity="epic"] .badge-icon-container::after{
  background: radial-gradient(60% 60% at 50% 50%, rgba(155,135,245,.55) 0%, transparent 70%);
  filter: blur(8px); opacity:.6;
}

[data-rarity="legendary"] .badge-icon-container{--accent:#ffd400;--spin-speed:10s;}
[data-rarity="legendary"] .badge-icon-container::before{
  background: conic-gradient(
    #ff7a00, #ffd400, #64ffda, #8a2be2, #00e5ff, #ff7a00
  );
  box-shadow: 0 0 18px rgba(255,180,70,.45), 0 0 26px rgba(140,80,255,.25);
  animation: spin var(--spin-speed) linear infinite, twinkle 2.6s ease-in-out infinite;
}
[data-rarity="legendary"] .badge-icon-container::after{
  background: radial-gradient(60% 60% at 50% 50%, rgba(255,255,180,.65) 0%, transparent 70%);
  filter: blur(9px); opacity:.75;
}

/* color-mix 미지원 브라우저 대체 */
@supports not (color-mix(in oklab, black 50%, white 50%)){
  [data-rarity="uncommon"] .badge-icon-container::before{background: conic-gradient(#79a9c9, #35536a, #79a9c9)}
  [data-rarity="rare"] .badge-icon-container::before{background: conic-gradient(#8ab0d1, #3c5470, #8ab0d1)}
}

/* ===== Owned check ===== */
.owned-badge{
  position:absolute;top:-6px;right:50%;transform:translateX(50%);
  background:linear-gradient(180deg,#9be58c,#3cb371);
  color:#091207;width:22px;height:22px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:12px;border:1px solid rgba(255,255,255,.08);
  box-shadow:0 2px 8px rgba(0,0,0,.25)
}

/* =====================
   Info / Text
   ===================== */
.badge-info{text-align:center}
.badge-name{color:#e6e6e6;margin-bottom:8px;font-weight:800;font-size:1.15rem}
.badge-description{color:#b0b0b0;margin-bottom:12px;line-height:1.55}
.badge-category{margin-bottom:14px}
.category-tag{
  display:inline-block;padding:6px 12px;border-radius:14px;font-size:.8rem;font-weight:700;
  text-transform:uppercase;letter-spacing:.5px;background:#2a2a2a;border:1px solid var(--accent,#8ab0d1);color:var(--accent,#8ab0d1)
}

/* =====================
   Progress
   ===================== */
.progress-section{margin-bottom:6px}
.progress-bar{width:100%;height:10px;background:#232323;border-radius:999px;overflow:hidden;margin-bottom:6px;border:1px solid #303030}
.progress-fill{
  height:100%;border-radius:999px;
  background:linear-gradient(90deg, color-mix(in oklab, var(--accent,#8ab0d1) 55%, #fff) 0%, color-mix(in oklab, var(--accent,#8ab0d1) 15%, #fff) 100%);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.18)
}
.progress-text{font-size:.9rem;color:#b7bbc1;font-weight:700}

/* =====================
   States
   ===================== */
.no-badges,.loading-message,.error-message{ text-align:center;background:#191919;border:1px solid #262626;border-radius:14px;padding:32px;color:#b7bbc1;margin:20px 0;}
.error-message{color:#ffd7d7;background:#2b1d1d;border-color:#4a2828}

/* =====================
   Animations
   ===================== */
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{
  0%,100%{transform:scale(1);opacity:.45}
  50%{transform:scale(1.06);opacity:.75}
}
@keyframes twinkle{
  0%,100%{filter:drop-shadow(0 0 10px rgba(255,220,120,.35))}
  50%{filter:drop-shadow(0 0 18px rgba(110,220,255,.5))}
}

/* 모션 최소화 환경 */
@media (prefers-reduced-motion: reduce){
  .badge-icon-container::before,
  .badge-icon-container::after{animation:none}
}

/* =====================
   Responsive
   ===================== */
@media (max-width:768px){
  .badge-guide-page{padding:24px 0}
  .page-header h1{font-size:2rem}
  .stats-section{grid-template-columns:1fr}
  .badges-grid{grid-template-columns:1fr}
  .badge-card{padding:18px}
}
